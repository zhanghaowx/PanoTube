<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Here Panorama From Server</title>
    <style>
        body {
            margin: 0 auto;
        }
    </style>
</head>

<body>
    <div id="container"></div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="https://github.com/dataarts/dat.gui/releases/download/v0.5.1/dat.gui.min.js"></script>
    <script data-main="../src/config.js" src="../node_modules/requirejs/require.js"></script>
    <script type="application/javascript">
        // Start loading the main app file. Put all of your application logic in there.
        requirejs(['app', 'here/api'], function() {
            var cube3D = $("#container").cube({
                tiles: HERE.Panorama.getImageUrls("1027084269", HERE.Panorama.RESOLUTION.HIGH)
            });
            cube3D.controller.autoRotate = true;
            cube3D.controller.autoRotateSpeed = 0.1;

            /**
             * Create a dashboard to monitor statistics
             * Requires: dat.gui (https://github.com/dataarts/dat.gui)
             */
            var createDebugGUI = function(cube3D) {
                var gui = new dat.GUI();
                var cameraGUI = gui.addFolder('Camera');
                cameraGUI.add(cube3D.controller, 'autoRotate');
                cameraGUI.add(cube3D.controller, 'autoRotateSpeed').min(0.1).max(1);
                cameraGUI.add(cube3D.controller, 'yaw').min(-180).max(180).listen();
                cameraGUI.add(cube3D.controller, 'pitch').min(-85).max(85).listen();
                cameraGUI.add(cube3D.camera, 'fov')
                    .min(cube3D.controller.minFov)
                    .max(cube3D.controller.maxFov).listen().onChange(function() {
                        cube3D.camera.updateProjectionMatrix();
                    });
                cameraGUI.open();

                if (cube3D.settings.blurArea) {
                    var blurGUI = gui.addFolder('Blur');
                    blurGUI.add(cube3D.blurArea.mesh.parameters, 'yaw').listen();
                    blurGUI.add(cube3D.blurArea.mesh.parameters, 'pitch').listen();
                    blurGUI.add(cube3D.blurArea.mesh.parameters, 'widthInDeg').listen();
                    blurGUI.add(cube3D.blurArea.mesh.parameters, 'heightInDeg').listen();

                    blurGUI.open();
                }

                var debugGUI = gui.addFolder('Debug');
                debugGUI.add(cube3D.settings, 'showPanorama').onChange(function(value) {
                    cube3D.cube.visible = value;
                });
                debugGUI.open();
            };
            createDebugGUI(cube3D);
        });
    </script>
</body>

</html>
